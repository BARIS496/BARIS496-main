<!doctype html>
<html lang="tr">

<head>

    <title>Containers Map</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src='https://api.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.css' rel='stylesheet' />

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <style>
        .marker {
            background-image: url('mapbox-icon.png');
            background-size: cover;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <div class="w3-top">
        <div class="w3-bar w3-black w3-card">
            <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right"
                href="javascript:void(0)" onclick="myFunction()" title="Toggle Navigation Menu"><i
                    class="fa fa-bars"></i></a>
            <a href="containers.html" class="w3-bar-item w3-button w3-padding-large">Containers List</a>
            <a href="mapBox.html" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Containers Map</a>
            <a href="members.html" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Members</a>
        </div>
    </div>

    <h1>--</h1>
    <div><h3>Map of Containers</h3></div>

    <div id='map' style='width: 1500px; height: 500px;'></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoidG9sZ2FjYXJyIiwiYSI6ImNrN2FyZjQxdzAwZ2cza2xzMTN1N2hwcnAifQ.306dpufyPnw7zlYiZRLx-w';
        if (!mapboxgl.supported()) {
            alert('Your browser does not support Mapbox GL');
        } else {
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/outdoors-v11',
                center: [32.841853, 39.924145],
                zoom: 12
            });
        }

        $(document).ready(function () {

            // show containers on map
            getContainers();

        });

        function getContainers() {
            $.getJSON("http://restservices496.herokuapp.com/containers", function (data) {
                $.each(data, function (key, value) {

                    var el = document.createElement('div');
                    el.className = 'marker';
                    var coordinates = [value.lng,value.lat];

                    new mapboxgl.Marker(el)
                        .setLngLat(coordinates)
                        .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
                            .setHTML('<h3>Name: ' + value.name + '</h3><p>Type: '+ value.type +'<p>Weight: ' + value.weight + '</p>'))
                        .addTo(map);
                });
            });
        }
        
    </script>


</body>

</html>